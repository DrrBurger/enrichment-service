# Enrichment Service

Enrichment Service представляет собой веб-сервис для обработки и обогащения информации о людях. Сервис предоставляет CRUD-операции для работы с данными о человеке и обогащает их информацией о возрасте, поле и национальности, используя различные внешние API.

# Настройка

## Для запуска сервиса вам потребуется:

* Клонировать репозиторий `git clone <url>`
* Создать .env файл с необходимыми переменными окружения:  
* Пример:  
  - DB_CONN_STRING: Строка подключения к вашей базе данных PostgreSQL.  
  - API_PORT: Порт, на котором будет работать ваш сервер.  

Запустите сервис, выполнив `go run <path to main.go>`

# API Endpoints

### Добавление человека  

Endpoint: /add  
Метод: POST  

Тело запроса:  

```json
{
  "Name": "John",
  "Surname": "Doe", 
  "Patronymic": "Vasilevich" // необязательно
}
```

Пример CURL:

```
curl -X POST -H "Content-Type: application/json" -d '{"Name": "John", "Surname": "Doe"}' http://localhost:<API_PORT>/add
```

### Получение списка людей  

Endpoint: /get  
Метод: GET  

Параметры:  

limit: Опционально. Количество возвращаемых записей.  
offset: Опционально. Начальное смещение в результатах.  

Пример CURL:  

```
curl http://localhost:<API_PORT>/get?limit=10&offset=0
```

### Удаление человека  

Endpoint: /delete  
Метод: DELETE  

Параметры:  

id: Обязательно. ID человека для удаления.  

Пример CURL:  

```
curl -X DELETE http://localhost:<API_PORT>/delete?id=1
```

### Обновление данных о человеке  

Endpoint: /update  
Метод: PUT  

Тело запроса:  

```json
{
"ID": 1,
"Name": "John",
"Surname": "Doe"
}
```

Пример CURL:  

```
curl -X PUT -H "Content-Type: application/json" -d '{"ID": 1, "Name": "John", "Surname": "Doe"}' http://localhost:<API_PORT>/update
```

# Сущности:  
- Person
  ID: Уникальный идентификатор.
  Name: Имя.
  Surname: Фамилия.
  Patronymic: Отчество (опционально).
  Age: Возраст (опционально, определяется автоматически).
  Gender: Пол (опционально, определяется автоматически).
  Nationality: Национальность (опционально, определяется автоматически).

# Внешние API для обогащения данных

- Agify для определения возраста по имени.
- Genderize для определения пола по имени.
- Nationalize для определения национальности по имени.

# Рекомендации по безопасности

* API ключи: Если внешние сервисы для обогащения данных требуют API-ключи, необходимо хранить их в защищенной среде, например, в переменных окружения или зашифрованных файлах конфигурации.
* Обработка ошибок: Хотя в предоставленном коде уже имеется базовая обработка ошибок, рекомендуется добавить дополнительную логику для обработки различных видов ошибок, чтобы обеспечить корректное взаимодействие с клиентами и отслеживание проблем.
* Лимиты запросов: Возможно, стоит рассмотреть введение лимитов на частые запросы, чтобы избежать злоупотреблений.